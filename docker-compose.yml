version: '3'

services:

  web:
    image: node:10.15.1
    volumes:
      - ./web:/usr/src/service/web
    working_dir: /usr/src/service/web
    command: npm run serve
    ports:
      - 3000:3000
      - 1235:1235
    environment:
      NODE_ENV: development

  api:
    image: node:10.15.1
    volumes:
      - ./api:/usr/src/service/api
    working_dir: /usr/src/service/api
    command: npm run serve
    ports:
      - 3001:3001
    environment:
      NODE_ENV: development


# version: '3.4'
# services:
#   server:
#     build:
#       context: ./server
#       args:
#         PROPERTIES: application.properties.local
#     ports:
#       - "3001:8080"

#   client:
#     build: ./client
#     environment:
#       NODE_ENV: development
#       DIVS_CLIENT_PATH: /app/dist
#       DIVS_SRC_PATH: /app/src
#       DIVS_SERVER_URL: http://localhost:3001
#       DIVS_CLIENT_PORT: 3000
#     command: ['npm', 'start']
#     ports:
#       - "3000:3000" # browser
#       - "35729:35729" #livereload
#     volumes:
#       - type: bind
#         source: ./client/src
#         target: /app/src
#         read_only: true
